<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX_Tester</title>
    <style>
        .heading{
            display: block;
            width: 100%;
            border: 1px solid black;
            background-color: #222;
            color: #fff;
            padding: 10px;
        }

        div > p{
            font-size: 0.8em;
            color: #111;
            padding: 20px;
            background-color: #ddd;
        } 
    </style>
</head>
<body>
    <h1>AJAX Tester</h1>
    <div>URL: <input type="text" name="url" id="input" value="https://randomuser.me/api/"/> </div><br>
    <div><input type="button" name="sender" value="MakeRequest"/></div>
    <div id="output"></div>
    <script>
        // Event listener to make sure DOM Contant has loadent
        document.addEventListener("DOMContentLoaded",function(event){
            document.querySelector('input[name="sender"]').addEventListener('click',makeRequest);
        });
        
        function makeRequest() {
           let url = document.querySelector('input[name="url"]').value;
           //console.log(url);
           ajaxJS(url);
        }

        function ajaxJS(url) {
             let xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if(xhr.readyState==4&&xhr.status==200){
                    console.log(xhr.responseText);
                    output(xhr.responseText,xhr.status,"success");
                }
            }
            xhr.open('GET',url,true);
            xhr.send();
        }

        function output(responseText,status,xhr) {
            let output = document.getElementById("output");
            output.innerHTML = "";
            responseText = ((typeof responseText)=='string')?JSON.parse(responseText) : responseText;
            output.innerHTML = '<div><span class="heading"> Response Text </span><p>'+JSON.stringify(responseText)+'</p></div><br>';
            output.innerHTML+= '<div><span class="heading"> Status </span><p>'+JSON.stringify(status)+'</p></div>';
            output.innerHTML+= '<div><span class="heading"> Message </span><p>'+JSON.stringify(xhr)+'</p></div>';
            }

    </script>

</body>
</html>